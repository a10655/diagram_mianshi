<mxfile host="app.diagrams.net" modified="2024-04-09T03:33:11.952Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36" etag="dKgAdhUtS-GgtJsSgUU1" version="24.2.0" type="github" pages="3">
  <diagram id="ohnXSiem4yEs87opojs4" name="HashMap">
    <mxGraphModel dx="3017" dy="984" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="onKNXoKgGcAeMGmnEdmf-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-1" target="onKNXoKgGcAeMGmnEdmf-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-7" value="h=hash(key)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-6" vertex="1" connectable="0">
          <mxGeometry x="-0.0397" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-1" value="&lt;meta charset=&quot;utf-8&quot;&gt;&lt;pre style=&quot;font-size: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; color: rgb(187, 187, 187);&quot;&gt;&lt;font&gt;&lt;font style=&quot;font-size: 8px;&quot;&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;put&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;value&lt;/span&gt;)&lt;/font&gt;&lt;/font&gt;&lt;/pre&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-3" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 8px;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;public &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;put&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;value&lt;/span&gt;) {&lt;br style=&quot;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;putVal&lt;/span&gt;(&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;hash&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;), &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;value&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;false&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;true&lt;/span&gt;);&lt;br style=&quot;&quot;&gt;}&lt;br style=&quot;&quot;&gt;&lt;/font&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/span&gt;&lt;/font&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=10;" parent="1" vertex="1">
          <mxGeometry x="501" y="85" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-5" target="onKNXoKgGcAeMGmnEdmf-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-5" value="&lt;pre style=&quot;font-size: 10px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; color: rgb(187, 187, 187);&quot;&gt;&lt;pre style=&quot;font-size: 8px;&quot;&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;putVal&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;value&lt;/span&gt;, &lt;br&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;&#x9;boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;onlyIfAbsent&lt;/span&gt;,&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;evict&lt;/span&gt;)&lt;/pre&gt;&lt;/pre&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="150" y="208" width="220" height="46" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-10" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;[] tab; &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; p; &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;n, i;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="214" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-15" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;static final int &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;hash&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Object &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;h;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key &lt;/span&gt;== &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) ? &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0 &lt;/span&gt;: (h = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;hashCode&lt;/span&gt;()) ^ (h &amp;gt;&amp;gt;&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;16&lt;/span&gt;);&lt;br&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="152" width="326" height="50" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-16" value="&lt;pre style=&quot;font-size: 12px; color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;异或操作的特点是，&lt;/pre&gt;&lt;pre&gt;如果两个位不同，则结果为1，&lt;br&gt;如果两个位相同，则结果为0。这样可以保留hashCode的高位和低位的特征。&lt;br&gt;&lt;br&gt;这个表达式的目的是将hashCode的高位信息下移到低位，以便在计算&lt;br&gt;哈希桶索引时，高位和低位信息都能起到作用&lt;br&gt;&lt;br&gt;总的来说，这个表达式的目的是为了更好地分散哈希值，减少哈希冲突，从而提高HashMap的性能&lt;/pre&gt;&lt;/pre&gt;" style="whiteSpace=wrap;html=1;fontSize=8;align=left;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=0;glass=0;shadow=0;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="860" y="59" width="540" height="143" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-19" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.002;entryY=0.823;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-15" target="onKNXoKgGcAeMGmnEdmf-16" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="310" as="sourcePoint" />
            <mxPoint x="930" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-5" target="onKNXoKgGcAeMGmnEdmf-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-21" target="onKNXoKgGcAeMGmnEdmf-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-28" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-27" vertex="1" connectable="0">
          <mxGeometry x="0.0262" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-21" target="onKNXoKgGcAeMGmnEdmf-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-40" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-32" vertex="1" connectable="0">
          <mxGeometry x="-0.65" relative="1" as="geometry">
            <mxPoint y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-21" value="判断数组是否为空" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="317" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-25" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((tab = &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;table&lt;/span&gt;) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;|| (n = tab.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;length&lt;/span&gt;) == &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;)&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="337" width="249" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-26" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="260" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-26" value="创建/扩容数组" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="330" y="426" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-31" target="onKNXoKgGcAeMGmnEdmf-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-49" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-48" vertex="1" connectable="0">
          <mxGeometry x="-0.4093" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-31" target="onKNXoKgGcAeMGmnEdmf-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-52" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-51" vertex="1" connectable="0">
          <mxGeometry x="-0.1396" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-31" value="&lt;span style=&quot;text-align: left;&quot;&gt;待插入元素&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;对应&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;数组中&lt;/span&gt;&lt;span style=&quot;text-align: left;&quot;&gt;的&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;text-align: left;&quot;&gt;index的hash桶是否为null&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="170" y="477" width="180" height="113" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-34" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;final &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;[] &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;resize&lt;/span&gt;() {&lt;br&gt;    &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;[] oldTab = &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;table&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;oldCap = (oldTab == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) ? &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0 &lt;/span&gt;: oldTab.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;length&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;oldThr = &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;threshold&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;newCap, newThr = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(oldCap &amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(oldCap &amp;gt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;MAXIMUM_CAPACITY&lt;/span&gt;) {&lt;br&gt;            &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;threshold &lt;/span&gt;= &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Integer&lt;/span&gt;.&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;MAX_VALUE&lt;/span&gt;;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;oldTab;&lt;br&gt;        }&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else if &lt;/span&gt;((newCap = oldCap &amp;lt;&amp;lt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;1&lt;/span&gt;) &amp;lt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;MAXIMUM_CAPACITY &lt;/span&gt;&amp;amp;&amp;amp;&lt;br&gt;                 oldCap &amp;gt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;DEFAULT_INITIAL_CAPACITY&lt;/span&gt;)&lt;br&gt;            newThr = oldThr &amp;lt;&amp;lt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;1&lt;/span&gt;; &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// double threshold&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;    &lt;/span&gt;}&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else if &lt;/span&gt;(oldThr &amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;) &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// initial capacity was placed in threshold&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;        &lt;/span&gt;newCap = oldThr;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{               &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// zero initial threshold signifies using defaults&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;        &lt;/span&gt;newCap = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;DEFAULT_INITIAL_CAPACITY&lt;/span&gt;;&lt;br&gt;        newThr = (&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int&lt;/span&gt;)(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;DEFAULT_LOAD_FACTOR &lt;/span&gt;* &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;DEFAULT_INITIAL_CAPACITY&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(newThr == &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;float &lt;/span&gt;ft = (&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;float&lt;/span&gt;)newCap * &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;loadFactor&lt;/span&gt;;&lt;br&gt;        newThr = (newCap &amp;lt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;MAXIMUM_CAPACITY &lt;/span&gt;&amp;amp;&amp;amp; ft &amp;lt; (&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;float&lt;/span&gt;)&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;MAXIMUM_CAPACITY &lt;/span&gt;?&lt;br&gt;                  (&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int&lt;/span&gt;)ft : &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Integer&lt;/span&gt;.&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;MAX_VALUE&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;threshold &lt;/span&gt;= newThr;&lt;br&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic;&quot;&gt;@SuppressWarnings&lt;/span&gt;({&lt;span style=&quot;color: rgb(137, 202, 120);&quot;&gt;&quot;rawtypes&quot;&lt;/span&gt;,&lt;span style=&quot;color: rgb(137, 202, 120);&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;})&lt;br&gt;        &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;[] newTab = (&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;[])&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;[newCap];&lt;br&gt;    &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;table &lt;/span&gt;= newTab;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(oldTab != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;j = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;; j &amp;lt; oldCap; ++j) {&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; e;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((e = oldTab[j]) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;                oldTab[j] = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next &lt;/span&gt;== &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br/&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;    //对应index的hash桶只有一个元素&lt;br&gt;                    newTab[e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;hash &lt;/span&gt;&amp;amp; (newCap - &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;1&lt;/span&gt;)] = e;&lt;br&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else if &lt;/span&gt;(e &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;instanceof &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;)&lt;br&gt;                    ((&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;)e).split(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;this&lt;/span&gt;, newTab, j, oldCap);&lt;br&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{ &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// preserve order&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;                    &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; loHead = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;, loTail = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;                    &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; hiHead = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;, hiTail = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;                    &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; next;&lt;br&gt;                    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;do &lt;/span&gt;{&lt;br&gt;                        next = e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next&lt;/span&gt;;&lt;br&gt;                        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;hash &lt;/span&gt;&amp;amp; oldCap) == &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;) {&lt;br&gt;                            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(loTail == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                                loHead = e;&lt;br&gt;                            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;                                &lt;/span&gt;loTail.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next &lt;/span&gt;= e;&lt;br&gt;                            loTail = e;&lt;br&gt;                        }&lt;br&gt;                        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;                            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(hiTail == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                                hiHead = e;&lt;br&gt;                            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;                                &lt;/span&gt;hiTail.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next &lt;/span&gt;= e;&lt;br&gt;                            hiTail = e;&lt;br&gt;                        }&lt;br&gt;                    } &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;while &lt;/span&gt;((e = next) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;);&lt;br&gt;                    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(loTail != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;                        loTail.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;                        newTab[j] = loHead;&lt;br&gt;                    }&lt;br&gt;                    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(hiTail != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;                        hiTail.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;                        newTab[j + oldCap] = hiHead;&lt;br&gt;                    }&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;newTab;&lt;br&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="827" y="397" width="573" height="720" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-36" value="&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;计&lt;br style=&quot;font-size: 16px;&quot;&gt;算&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;新&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;的&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;数&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;组&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;长&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;度&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;和&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;扩&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;容&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;阈&lt;br style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 16px; text-wrap: nowrap;&quot;&gt;值&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="1221" y="397" width="40" height="263" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-37" value="&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 10px;&quot;&gt;在map的数组中对应的&lt;/span&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 10px; background-color: initial;&quot;&gt;链表位置上只有一个元素，&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(187, 187, 187); font-size: 10px; background-color: initial;&quot;&gt;就直接插入新的位置&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1130" y="720" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-38" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;oldCap : 10000 --&amp;gt; 16&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;newCap:100000 --&amp;gt; 32&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;e.hash&amp;amp;oldCap == 0;就不用与newCap-1做比较了&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;做数据转移，转移到新的数组hash桶里&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;1、为什么不直接把e的链接放进新的数组hash桶的位置上？&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;有可能在当前e这个链表中，后继元素可能会放在高位上的数组hash桶中&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 10px;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1063" y="870" width="340" height="140" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-46" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((p = tab[i = (n - &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;1&lt;/span&gt;) &amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash&lt;/span&gt;]) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="500" width="249" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-47" target="onKNXoKgGcAeMGmnEdmf-58" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="430" y="807" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-47" value="创建一个新的Node放入数组对应的index位置上" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="370" y="620" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-59" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-50" target="onKNXoKgGcAeMGmnEdmf-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-50" value="在对应的位置上插入或者更新元素值" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="696.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-55" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;tab[i] = &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;newNode&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;value&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;);&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="630" width="249" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-57" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;n = (tab = &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;resize&lt;/span&gt;()).&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;length&lt;/span&gt;;&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="419" width="249" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-61" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-58" target="onKNXoKgGcAeMGmnEdmf-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-58" value="增加修改次数" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="790" width="120" height="33.5" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-63" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-60" target="onKNXoKgGcAeMGmnEdmf-62" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-64" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-63" vertex="1" connectable="0">
          <mxGeometry x="-0.1828" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-66" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-60" target="onKNXoKgGcAeMGmnEdmf-65" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="261" y="960" />
              <mxPoint x="261" y="960" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-67" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-66" vertex="1" connectable="0">
          <mxGeometry x="-0.2975" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-60" value="判断是否需要扩容" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="201" y="857" width="119" height="83.25" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="459.5454545454545" y="910.005" as="sourcePoint" />
            <mxPoint x="321" y="996.6350000000001" as="targetPoint" />
            <Array as="points">
              <mxPoint x="460" y="996.38" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-62" value="进行扩容操作" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="370" y="868.625" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-69" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-65" target="onKNXoKgGcAeMGmnEdmf-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-65" value="插入节点后的操作&lt;div&gt;在LinkedHashMap中实现&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="201" y="970.2550000000001" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-68" value="返回null值" style="ellipse;whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="221" y="1070.9950000000001" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-73" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;++&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;modCount&lt;/span&gt;;//有使用有fail-fast机制的迭代器遍历集合时，&lt;/pre&gt;&lt;pre&gt;有修改集合的操作也会抛出此异常&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="783.5" width="249" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-76" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(++&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;size &lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;threshold&lt;/span&gt;)&lt;br&gt;    &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;resize&lt;/span&gt;();&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="878.62" width="249" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-80" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;afterNodeInsertion&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;evict&lt;/span&gt;);&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=1;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="501" y="980.26" width="249" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-84" value="&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; e; &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K &lt;/span&gt;k;&lt;br&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(p.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;hash &lt;/span&gt;== &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash &lt;/span&gt;&amp;amp;&amp;amp;&lt;br&gt;    ((k = p.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;key&lt;/span&gt;) == &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key &lt;/span&gt;|| (&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key &lt;/span&gt;!= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;equals&lt;/span&gt;(k))))&lt;br&gt;    e = p;&lt;br&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else if &lt;/span&gt;(p &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;instanceof &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;)&lt;br&gt;    e = ((&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;)p).putTreeVal(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;this&lt;/span&gt;, tab, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;value&lt;/span&gt;);&lt;br&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;binCount = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;; ; ++binCount) {&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;//1、遍历到链表尾部，在最后插入新节点并跳出；因链表长度+1，所以判断是否需要树化&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((e = p.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next&lt;/span&gt;) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;            p.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next &lt;/span&gt;= &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;newNode&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;value&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(binCount &amp;gt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;TREEIFY_THRESHOLD &lt;/span&gt;- &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;1&lt;/span&gt;) &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// -1 for 1st；&lt;/span&gt;binCount从0计数&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;                &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;treeifyBin&lt;/span&gt;(tab, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;break&lt;/span&gt;;&lt;br&gt;        }&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;//2、e指向的节点与要插入节点的key相同，此次put为覆盖旧值操作&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;hash &lt;/span&gt;== &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash &lt;/span&gt;&amp;amp;&amp;amp;&lt;br&gt;            ((k = e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;key&lt;/span&gt;) == &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key &lt;/span&gt;|| (&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key &lt;/span&gt;!= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;key&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;equals&lt;/span&gt;(k))))&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;break&lt;/span&gt;;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;//遍历桶中链表，结合前面的e=p.next来做全链表的遍历操作&lt;span style=&quot;white-space: pre;&quot;&gt;&lt;br&gt;&lt;/span&gt;        p = e;&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(e != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) { &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// existing mapping for key&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V &lt;/span&gt;oldValue = e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;value&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(!&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;onlyIfAbsent &lt;/span&gt;|| oldValue == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;        e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;value &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;value&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;afterNodeAccess&lt;/span&gt;(e);&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;oldValue;&lt;br&gt;}&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;strokeColor=none;gradientColor=none;rounded=0;glass=0;shadow=0;align=left;verticalAlign=middle;labelPosition=center;verticalLabelPosition=middle;fontSize=8;spacingTop=0;" parent="1" vertex="1">
          <mxGeometry x="-270" y="680.26" width="410" height="359.74" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-86" value="&lt;code style=&quot;font-size: 6px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; box-sizing: border-box; outline: 0px; font-family: &amp;quot;Source Code Pro&amp;quot;, &amp;quot;DejaVu Sans Mono&amp;quot;, &amp;quot;Ubuntu Mono&amp;quot;, &amp;quot;Anonymous Pro&amp;quot;, &amp;quot;Droid Sans Mono&amp;quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; line-height: 22px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 2px; padding: 2px 4px; overflow-wrap: break-word; font-variant-ligatures: no-common-ligatures; text-align: start;&quot;&gt;binCount &amp;gt;= TREEIFY_THRESHOLD - 1&lt;/code&gt;&lt;span style=&quot;font-size: 6px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; color: rgb(77, 77, 77); font-family: -apple-system, &amp;quot;SF UI Text&amp;quot;, Arial, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, &amp;quot;WenQuanYi Micro Hei&amp;quot;, sans-serif; font-variant-ligatures: no-common-ligatures; text-align: start; background-color: rgb(255, 255, 255); float: none; display: inline !important;&quot;&gt;&lt;span style=&quot;font-size: 6px;&quot;&gt;&amp;nbsp;&lt;/span&gt;=&amp;gt;&lt;span style=&quot;font-size: 6px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;code style=&quot;font-size: 6px; font-style: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; box-sizing: border-box; outline: 0px; font-family: &amp;quot;Source Code Pro&amp;quot;, &amp;quot;DejaVu Sans Mono&amp;quot;, &amp;quot;Ubuntu Mono&amp;quot;, &amp;quot;Anonymous Pro&amp;quot;, &amp;quot;Droid Sans Mono&amp;quot;, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, sans-serif; line-height: 22px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 2px; padding: 2px 4px; overflow-wrap: break-word; font-variant-ligatures: no-common-ligatures; text-align: start;&quot;&gt;binCount+1(链表长度) &amp;gt;= TREEIFY_THRESHOLD&lt;/code&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;" parent="1" vertex="1">
          <mxGeometry x="-85" y="818.5" width="310" height="30" as="geometry" />
        </mxCell>
        <UserObject label="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;final void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;split&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;HashMap&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;map&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt;[] &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;index&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;bit&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; b = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;this&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 8px;&quot;&gt;// Relink into lo and hi lists, preserving order&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 8px;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; loHead = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;, loTail = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; hiHead = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;, hiTail = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;lc = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;0&lt;/span&gt;, hc = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;0&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; e = b, next; e != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;; e = next) {&lt;br style=&quot;font-size: 8px;&quot;&gt;        next = (&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt;)e.next;&lt;br style=&quot;font-size: 8px;&quot;&gt;        e.next = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;((e.hash &amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;bit&lt;/span&gt;) == &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;0&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;((e.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;prev &lt;/span&gt;= loTail) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                loHead = e;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;                &lt;/span&gt;loTail.next = e;&lt;br style=&quot;font-size: 8px;&quot;&gt;            loTail = e;&lt;br style=&quot;font-size: 8px;&quot;&gt;            ++lc;&lt;br style=&quot;font-size: 8px;&quot;&gt;        }&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else &lt;/span&gt;{&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;((e.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;prev &lt;/span&gt;= hiTail) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                hiHead = e;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;                &lt;/span&gt;hiTail.next = e;&lt;br style=&quot;font-size: 8px;&quot;&gt;            hiTail = e;&lt;br style=&quot;font-size: 8px;&quot;&gt;            ++hc;&lt;br style=&quot;font-size: 8px;&quot;&gt;        }&lt;br style=&quot;font-size: 8px;&quot;&gt;    }&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(loHead != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(lc &amp;lt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;UNTREEIFY_THRESHOLD&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;index&lt;/span&gt;] = loHead.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;untreeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;map&lt;/span&gt;);&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else &lt;/span&gt;{&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;index&lt;/span&gt;] = loHead;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(hiHead != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;) &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 8px;&quot;&gt;// (else is already treeified)&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 8px;&quot;&gt;                &lt;/span&gt;loHead.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;treeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;);&lt;br style=&quot;font-size: 8px;&quot;&gt;        }&lt;br style=&quot;font-size: 8px;&quot;&gt;    }&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(hiHead != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(hc &amp;lt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;UNTREEIFY_THRESHOLD&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;index &lt;/span&gt;+ &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;bit&lt;/span&gt;] = hiHead.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;untreeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;map&lt;/span&gt;);&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else &lt;/span&gt;{&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;index &lt;/span&gt;+ &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;bit&lt;/span&gt;] = hiHead;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(loHead != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                hiHead.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;treeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;);&lt;br style=&quot;font-size: 8px;&quot;&gt;        }&lt;br style=&quot;font-size: 8px;&quot;&gt;    }&lt;br style=&quot;font-size: 8px;&quot;&gt;}&lt;/pre&gt;" link="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 20px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;final void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;split&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;HashMap&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;map&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;[] &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;index&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;bit&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; b = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;this&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// Relink into lo and hi lists, preserving order&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; loHead = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;, loTail = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; hiHead = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;, hiTail = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;lc = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;, hc = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; e = b, next; e != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;; e = next) {&lt;br&gt;        next = (&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;)e.next;&lt;br&gt;        e.next = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((e.hash &amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;bit&lt;/span&gt;) == &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;) {&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;prev &lt;/span&gt;= loTail) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                loHead = e;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;                &lt;/span&gt;loTail.next = e;&lt;br&gt;            loTail = e;&lt;br&gt;            ++lc;&lt;br&gt;        }&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;prev &lt;/span&gt;= hiTail) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                hiHead = e;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;                &lt;/span&gt;hiTail.next = e;&lt;br&gt;            hiTail = e;&lt;br&gt;            ++hc;&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(loHead != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(lc &amp;lt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;UNTREEIFY_THRESHOLD&lt;/span&gt;)&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;index&lt;/span&gt;] = loHead.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;untreeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;map&lt;/span&gt;);&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;index&lt;/span&gt;] = loHead;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(hiHead != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// (else is already treeified)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;                &lt;/span&gt;loHead.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;treeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(hiHead != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(hc &amp;lt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;UNTREEIFY_THRESHOLD&lt;/span&gt;)&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;index &lt;/span&gt;+ &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;bit&lt;/span&gt;] = hiHead.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;untreeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;map&lt;/span&gt;);&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;index &lt;/span&gt;+ &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;bit&lt;/span&gt;] = hiHead;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(loHead != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                hiHead.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;treeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;/pre&gt;" id="onKNXoKgGcAeMGmnEdmf-88">
          <mxCell style="text;whiteSpace=wrap;html=1;fontSize=8;fillColor=#000000;" parent="1" vertex="1">
            <mxGeometry x="1400" y="756.5" width="360" height="470" as="geometry" />
          </mxCell>
        </UserObject>
        <UserObject label="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;final void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;treeifyBin&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt;[] &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;hash&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;n, index; &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; e;&lt;br&gt;    //数组为空或者数组大小小于64时只进行扩容操作，不做树化操作&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab &lt;/span&gt;== &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null &lt;/span&gt;|| (n = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;length&lt;/span&gt;) &amp;lt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;MIN_TREEIFY_CAPACITY&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;resize&lt;/span&gt;();&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else if &lt;/span&gt;((e = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;[index = (n - &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;1&lt;/span&gt;) &amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;hash&lt;/span&gt;]) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; hd = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;, tl = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;do &lt;/span&gt;{&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; p = &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;replacementTreeNode&lt;/span&gt;(e, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;);&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(tl == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                hd = p;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else &lt;/span&gt;{&lt;br style=&quot;font-size: 8px;&quot;&gt;                p.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;prev &lt;/span&gt;= tl;&lt;br style=&quot;font-size: 8px;&quot;&gt;                tl.next = p;&lt;br style=&quot;font-size: 8px;&quot;&gt;            }&lt;br style=&quot;font-size: 8px;&quot;&gt;            tl = p;&lt;br style=&quot;font-size: 8px;&quot;&gt;        } &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;while &lt;/span&gt;((e = e.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;next&lt;/span&gt;) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;);&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;((&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;[index] = hd) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;            hd.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;treeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;);&lt;br style=&quot;font-size: 8px;&quot;&gt;    }&lt;br style=&quot;font-size: 8px;&quot;&gt;}&lt;/pre&gt;" link="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 20px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;final void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;treeifyBin&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;[] &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;n, index; &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; e;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab &lt;/span&gt;== &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;|| (n = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;length&lt;/span&gt;) &amp;lt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;MIN_TREEIFY_CAPACITY&lt;/span&gt;)&lt;br&gt;        &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;resize&lt;/span&gt;();&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else if &lt;/span&gt;((e = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;[index = (n - &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;1&lt;/span&gt;) &amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;hash&lt;/span&gt;]) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; hd = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;, tl = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;do &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; p = &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;replacementTreeNode&lt;/span&gt;(e, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(tl == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                hd = p;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;                p.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;prev &lt;/span&gt;= tl;&lt;br&gt;                tl.next = p;&lt;br&gt;            }&lt;br&gt;            tl = p;&lt;br&gt;        } &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;while &lt;/span&gt;((e = e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;next&lt;/span&gt;) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;);&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;[index] = hd) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;            hd.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;treeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;}&lt;/pre&gt;" id="onKNXoKgGcAeMGmnEdmf-93">
          <mxCell style="text;whiteSpace=wrap;html=1;fontSize=8;fillColor=#000000;" parent="1" vertex="1">
            <mxGeometry x="-580" y="823.5" width="310" height="216.5" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-95" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-192" y="836.1" as="sourcePoint" />
            <mxPoint x="-332" y="836.1" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-96" value="树化判断操作" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;labelBackgroundColor=#000000;fontColor=#FFFFFF;" parent="onKNXoKgGcAeMGmnEdmf-95" connectable="0" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-97" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1167" y="780" as="sourcePoint" />
            <mxPoint x="1397" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-98" value="树化分离操作" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;labelBackgroundColor=#000000;fontColor=#FFFFFF;" parent="onKNXoKgGcAeMGmnEdmf-97" connectable="0" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-101" value="&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;将&lt;/font&gt;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;旧&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;的&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;hash&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;桶&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;转&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;移&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;到&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;新&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap; background-color: initial;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;数&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;组&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;各&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;自&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;对&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;应&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;index&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;text-wrap: nowrap; background-color: initial;&quot;&gt;位&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;置&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;text-wrap: nowrap;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;上&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#82B366;fontSize=8;align=center;verticalAlign=middle;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="899" y="800" width="20" height="249.25" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-103" value="&lt;pre style=&quot;font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;font-size: 8px; font-style: italic;&quot;&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;//计算数组大小&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-size: 8px; font-style: italic;&quot;&gt;&lt;br&gt;static final int &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;tableSizeFor&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;(&lt;/font&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-size: 8px; font-style: italic;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;cap&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;/font&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-size: 8px; font-style: italic;&quot;&gt;int &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;n = &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;cap &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;- &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;1&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    n |= n &amp;gt;&amp;gt;&amp;gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;1&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    n |= n &amp;gt;&amp;gt;&amp;gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;2&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    n |= n &amp;gt;&amp;gt;&amp;gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;4&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    n |= n &amp;gt;&amp;gt;&amp;gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;8&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    n |= n &amp;gt;&amp;gt;&amp;gt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;16&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;/font&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-size: 8px; font-style: italic;&quot;&gt;return &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;(n &amp;lt; &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;0&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;) ? &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;1 &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;: (n &amp;gt;= &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;MAXIMUM_CAPACITY&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;) ? &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;MAXIMUM_CAPACITY &lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;: n + &lt;/font&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;1&lt;/span&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;}&lt;br&gt;&lt;/font&gt;&lt;pre style=&quot;color: rgb(187, 187, 187);&quot;&gt;&lt;font style=&quot;font-size: 8px;&quot;&gt;注：对参数进行减1的操作，是未了防止出现参数是2的倍数时，返回参数两倍的情况&lt;/font&gt;&lt;/pre&gt;&lt;font color=&quot;#bbbbbb&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=8;fillColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1403" y="59" width="380" height="160" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-105" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;final void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;treeify&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt;[] &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; root = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; x = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;this&lt;/span&gt;, next; x != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;; x = next) {&lt;br style=&quot;font-size: 8px;&quot;&gt;        next = (&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt;)x.next;&lt;br style=&quot;font-size: 8px;&quot;&gt;        x.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;left &lt;/span&gt;= x.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;right &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(root == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;            x.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;parent &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;            x.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;red &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;false&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;            root = x;&lt;br style=&quot;font-size: 8px;&quot;&gt;        }&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else &lt;/span&gt;{&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K &lt;/span&gt;k = x.key;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;h = x.hash;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; kc = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; p = root;;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;dir, ph;&lt;br style=&quot;font-size: 8px;&quot;&gt;                &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K &lt;/span&gt;pk = p.key;&lt;br style=&quot;font-size: 8px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;((ph = p.hash) &amp;gt; h)&lt;br style=&quot;font-size: 8px;&quot;&gt;                    dir = -&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;1&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else if &lt;/span&gt;(ph &amp;lt; h)&lt;br style=&quot;font-size: 8px;&quot;&gt;                    dir = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;1&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else if &lt;/span&gt;((kc == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp;&lt;br style=&quot;font-size: 8px;&quot;&gt;                          (kc = &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;comparableClassFor&lt;/span&gt;(k)) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;) ||&lt;br style=&quot;font-size: 8px;&quot;&gt;                         (dir = &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;compareComparables&lt;/span&gt;(kc, k, pk)) == &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;0&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                    dir = &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;tieBreakOrder&lt;/span&gt;(k, pk);&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;br style=&quot;font-size: 8px;&quot;&gt;                &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; xp = p;&lt;br style=&quot;font-size: 8px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;((p = (dir &amp;lt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;0&lt;/span&gt;) ? p.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;left &lt;/span&gt;: p.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;right&lt;/span&gt;) == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;                    x.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;parent &lt;/span&gt;= xp;&lt;br style=&quot;font-size: 8px;&quot;&gt;                    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(dir &amp;lt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;0&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                        xp.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;left &lt;/span&gt;= x;&lt;br style=&quot;font-size: 8px;&quot;&gt;                    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;else&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;                        &lt;/span&gt;xp.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;right &lt;/span&gt;= x;&lt;br style=&quot;font-size: 8px;&quot;&gt;                    root = &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;balanceInsertion&lt;/span&gt;(root, x);&lt;br style=&quot;font-size: 8px;&quot;&gt;                    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;break&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;                }&lt;br style=&quot;font-size: 8px;&quot;&gt;            }&lt;br style=&quot;font-size: 8px;&quot;&gt;        }&lt;br style=&quot;font-size: 8px;&quot;&gt;    }&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;moveRootToFront&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;, root);&lt;br style=&quot;font-size: 8px;&quot;&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=8;fillColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="-580" y="1040" width="490" height="420" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-107" value="&lt;font style=&quot;font-size: 6px;&quot; color=&quot;#ffffff&quot;&gt;树&amp;nbsp;&lt;br&gt;化&lt;br&gt;前&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 6px;&quot; color=&quot;#ffffff&quot;&gt;操&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 6px;&quot; color=&quot;#ffffff&quot;&gt;作&lt;/font&gt;&lt;/div&gt;" style="strokeWidth=0.5;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;strokeColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="-550" y="910" width="10" height="90" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-109" value="&lt;font style=&quot;font-size: 8px;&quot; color=&quot;#ffffff&quot;&gt;将Node转化为TreeNode，&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;text-align: left; font-size: 8px;&quot;&gt;&lt;font style=&quot;font-size: 8px;&quot; color=&quot;#ffffff&quot;&gt;双向链表的操作&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-size: 8px;&quot;&gt;&lt;font style=&quot;font-size: 8px;&quot; color=&quot;#ffffff&quot;&gt;hd &amp;lt;--------------&amp;gt; tl&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;" parent="1" vertex="1">
          <mxGeometry x="-445" y="900" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-111" value="" style="endArrow=classic;html=1;rounded=0;fontColor=#FFFFFF;strokeColor=#FFFFFF;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-490" y="1023.26" as="sourcePoint" />
            <mxPoint x="-510" y="1053.26" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-112" value="&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;font style=&quot;font-size: 8px;&quot;&gt;真正树化操作&lt;/font&gt;&lt;/span&gt;" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;labelBackgroundColor=none;" parent="onKNXoKgGcAeMGmnEdmf-111" connectable="0" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-117" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;entryX=0.999;entryY=0.129;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="onKNXoKgGcAeMGmnEdmf-84" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="726.0699999999999" as="sourcePoint" />
            <mxPoint x="121" y="726.0699999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-118" value="&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 6px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;设置根root&lt;/span&gt;&lt;/font&gt;" style="strokeWidth=0.5;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;strokeColor=#FFFFFF;direction=west;" parent="1" vertex="1">
          <mxGeometry x="-439" y="1107" width="10" height="40" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-120" value="&lt;span style=&quot;font-size: 6px;&quot;&gt;//下面for循环中的this是上面的hd双向链表&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="-441" y="1052.25" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-121" value="&lt;span style=&quot;font-family: Menlo, Monaco, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: pre; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt; //获取当前元素的下一个元素，临时用于for循环中的复制&lt;/font&gt;&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fontColor=default;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-402" y="1079.25" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-124" value="" style="endArrow=none;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-125" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-830" y="1120" as="sourcePoint" />
            <mxPoint x="-830" y="1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-123" value="this = hd" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-859" y="1039.25" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-128" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-125" target="onKNXoKgGcAeMGmnEdmf-127" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-125" value="x = this" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-870" y="1130" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-131" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-127" target="onKNXoKgGcAeMGmnEdmf-130" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-132" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-131" vertex="1" connectable="0">
          <mxGeometry x="0.248" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-148" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" target="onKNXoKgGcAeMGmnEdmf-150" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-720" y="1630" as="targetPoint" />
            <mxPoint x="-790" y="1209" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="-708" y="1209" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-149" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-148" vertex="1" connectable="0">
          <mxGeometry x="-0.8947" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-261" value="&lt;font color=&quot;#cc0000&quot;&gt;跳出大循环&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-148" vertex="1" connectable="0">
          <mxGeometry x="-0.2273" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-127" value="x!=null" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-870" y="1169" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-129" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-127" target="onKNXoKgGcAeMGmnEdmf-127" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-135" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-130" target="onKNXoKgGcAeMGmnEdmf-134" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-130" value="next = x.next;" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-890" y="1279" width="120" height="31" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-133" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-130" target="onKNXoKgGcAeMGmnEdmf-130" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-140" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-134" target="onKNXoKgGcAeMGmnEdmf-139" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-141" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-140" vertex="1" connectable="0">
          <mxGeometry x="-0.0807" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-146" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-134" target="onKNXoKgGcAeMGmnEdmf-145" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-147" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-146" vertex="1" connectable="0">
          <mxGeometry x="-0.1667" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-134" value="root == null" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-870" y="1365.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-143" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" target="onKNXoKgGcAeMGmnEdmf-142" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1003.0000000000002" y="1435.5" as="sourcePoint" />
            <mxPoint x="-823.0000000000002" y="1870" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-1003" y="2185" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-139" value="x.parent=null;&lt;div&gt;x.red = false;&lt;/div&gt;&lt;div&gt;root = x;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1047" y="1375.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-142" target="onKNXoKgGcAeMGmnEdmf-127" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1090" y="2200" />
              <mxPoint x="-1090" y="1209" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-142" value="x = next;" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-895.5" y="2170" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-214" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-145" target="onKNXoKgGcAeMGmnEdmf-213" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-145" value="p = root;" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-890" y="1486.5" width="120" height="33.5" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-150" value="&lt;pre style=&quot;font-size: 8px; text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;moveRootToFront&lt;/span&gt;(&lt;span style=&quot;&quot;&gt;tab&lt;/span&gt;, root);&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="-748" y="1477" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-150" target="onKNXoKgGcAeMGmnEdmf-150" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <UserObject label="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;static &lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;moveRootToFront&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt;[] &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;n;&lt;br style=&quot;font-size: 8px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root &lt;/span&gt;!= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab &lt;/span&gt;!= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; (n = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;length&lt;/span&gt;) &amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;0&lt;/span&gt;) {&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;int &lt;/span&gt;index = (n - &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;1&lt;/span&gt;) &amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;.hash;&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; first = (&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt;)&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;[index];&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root &lt;/span&gt;!= first) {&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; rn;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;tab&lt;/span&gt;[index] = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt; rp = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;prev&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;((rn = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;.next) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                ((&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 8px;&quot;&gt;V&lt;/span&gt;&amp;gt;)rn).prev = rp;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(rp != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                rp.next = rn;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;if &lt;/span&gt;(first != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 8px;&quot;&gt;                first.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;prev &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;.next = first;&lt;br style=&quot;font-size: 8px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 8px;&quot;&gt;prev &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 8px;&quot;&gt;        }&lt;br style=&quot;font-size: 8px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 8px;&quot;&gt;assert &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 8px;&quot;&gt;checkInvariants&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 8px;&quot;&gt;root&lt;/span&gt;);&lt;br style=&quot;font-size: 8px;&quot;&gt;    }&lt;br style=&quot;font-size: 8px;&quot;&gt;}&lt;/pre&gt;" link="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 20px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;static &lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;moveRootToFront&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;[] &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;n;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root &lt;/span&gt;!= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab &lt;/span&gt;!= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; (n = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;length&lt;/span&gt;) &amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;index = (n - &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;1&lt;/span&gt;) &amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;.hash;&lt;br&gt;        &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; first = (&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;)&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;[index];&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root &lt;/span&gt;!= first) {&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; rn;&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;tab&lt;/span&gt;[index] = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;;&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt; rp = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;prev&lt;/span&gt;;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;((rn = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;.next) != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                ((&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;TreeNode&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;K&lt;/span&gt;,&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;V&lt;/span&gt;&amp;gt;)rn).prev = rp;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(rp != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                rp.next = rn;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(first != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;)&lt;br&gt;                first.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;prev &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;;&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;.next = first;&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;prev &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;;&lt;br&gt;        }&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;assert &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;checkInvariants&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;root&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;}&lt;/pre&gt;" id="onKNXoKgGcAeMGmnEdmf-155">
          <mxCell style="text;whiteSpace=wrap;html=1;fontSize=8;fillColor=#000000;" parent="1" vertex="1">
            <mxGeometry x="-580" y="1460" width="390" height="230" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-156" value="&lt;span style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;K k = x.key;&lt;/span&gt;&lt;div style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;int h = x.hash;&lt;/div&gt;&lt;div style=&quot;color: rgb(0, 0, 0); font-family: Helvetica; font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;Class&amp;lt;?&amp;gt; kc = null;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;align=left;fontSize=6;" parent="1" vertex="1">
          <mxGeometry x="-825" y="1447" width="67" height="33.5" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-161" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-158" target="onKNXoKgGcAeMGmnEdmf-160" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-165" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-161" vertex="1" connectable="0">
          <mxGeometry x="-0.264" y="-3" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-163" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-158" target="onKNXoKgGcAeMGmnEdmf-164" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-830" y="1670.625" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-166" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-163" vertex="1" connectable="0">
          <mxGeometry x="0.4962" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-158" value="ph&amp;gt;h" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-855" y="1580.75" width="50" height="33.25" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-192" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-160" target="onKNXoKgGcAeMGmnEdmf-189" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-970" y="1598" />
              <mxPoint x="-970" y="1816" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-160" value="dir = -1" style="ellipse;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-931" y="1580" width="40" height="35.38" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-177" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-164" target="onKNXoKgGcAeMGmnEdmf-176" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-179" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-177" vertex="1" connectable="0">
          <mxGeometry x="-0.2864" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-164" value="ph&amp;lt;h" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-855" y="1638" width="50" height="33.25" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-173" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-164" target="onKNXoKgGcAeMGmnEdmf-175" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-859" y="1654.94" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-174" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-173" vertex="1" connectable="0">
          <mxGeometry x="-0.264" y="-3" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-193" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-175" target="onKNXoKgGcAeMGmnEdmf-189" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-175" value="dir = 1" style="ellipse;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-926" y="1636.94" width="40" height="35.38" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-184" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="onKNXoKgGcAeMGmnEdmf-176" target="onKNXoKgGcAeMGmnEdmf-183" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-185" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-184" vertex="1" connectable="0">
          <mxGeometry x="-0.4724" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-178" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-176" target="onKNXoKgGcAeMGmnEdmf-176" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-194" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-183" target="onKNXoKgGcAeMGmnEdmf-189" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-183" value="&lt;pre style=&quot;font-size: 8px; text-align: left;&quot;&gt;dir = &lt;span style=&quot;&quot;&gt;tieBreakOrder&lt;/span&gt;(k, pk);&lt;/pre&gt;" style="whiteSpace=wrap;html=1;rounded=0;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="-740" y="1722" width="150" height="20.95" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-297" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.908;entryY=1.025;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-186" target="onKNXoKgGcAeMGmnEdmf-213" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-804.9968062148198" y="1891.4908163265304" as="sourcePoint" />
            <mxPoint x="-785" y="1570" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-786" y="1878" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-298" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-297" vertex="1" connectable="0">
          <mxGeometry x="-0.9553" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-176" value="kc == null ||&lt;div&gt;dir == 0&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-890" y="1705.88" width="120" height="54.13" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-186" value="p==null" style="rhombus;whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-860" y="1851" width="60" height="54.13" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-195" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-189" target="onKNXoKgGcAeMGmnEdmf-186" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-189" value="p = (dir&amp;lt;=0) ? p.left : p.right;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-913" y="1793" width="166" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-190" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-176" target="onKNXoKgGcAeMGmnEdmf-189" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-850" y="1832" as="sourcePoint" />
            <mxPoint x="-800" y="1782" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-191" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-190" vertex="1" connectable="0">
          <mxGeometry x="-0.2731" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-198" value="xp = p;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-917" y="1768" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-216" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-213" target="onKNXoKgGcAeMGmnEdmf-158" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-213" value="&lt;span style=&quot;font-size: 6px; text-align: left;&quot;&gt;K pk = p.key;&lt;/span&gt;&lt;div style=&quot;font-size: 6px; text-align: left;&quot;&gt;int ph = p.hash;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=bottom;" parent="1" vertex="1">
          <mxGeometry x="-884.5" y="1540" width="109" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-250" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-971" y="1945" width="320" height="185" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-199" value="r" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-790" y="1973.07" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-200" value="l" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-835" y="1993" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-201" value="r" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-750" y="1993" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-203" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-200" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-950" y="1961" as="sourcePoint" />
            <mxPoint x="-787.0710678118653" y="1984.1410678118655" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-204" value="" style="endArrow=none;html=1;rounded=0;entryX=1;entryY=1;entryDx=0;entryDy=0;exitX=0;exitY=0;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-201" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-808" y="2034" as="sourcePoint" />
            <mxPoint x="-772.9289321881342" y="1984.1410678118655" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-205" value="p" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-955" y="2042" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-206" value="root" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-716" y="1968.07" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-210" value="l" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-883" y="2012" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-211" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-210" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-998" y="1983" as="sourcePoint" />
            <mxPoint x="-835" y="2006" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-230" value="e0" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-922" y="1948" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-231" value="e1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-882" y="1948" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-232" value="e2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-842" y="1948" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-233" value="e3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-802" y="1948" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-234" value="e4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-762" y="1948" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-235" value="e5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-722" y="1948" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-236" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-230" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-952" y="1828" as="sourcePoint" />
            <mxPoint x="-882" y="1958" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-237" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-862" y="1957.8400000000001" as="sourcePoint" />
            <mxPoint x="-842" y="1957.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-238" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-822" y="1957.8400000000001" as="sourcePoint" />
            <mxPoint x="-802" y="1957.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-239" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-782" y="1957.8400000000001" as="sourcePoint" />
            <mxPoint x="-762" y="1957.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-240" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-742" y="1957.8400000000001" as="sourcePoint" />
            <mxPoint x="-722" y="1957.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-241" value="e6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-682" y="1948" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-242" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-702" y="1957.8400000000001" as="sourcePoint" />
            <mxPoint x="-682" y="1957.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-243" value="x的取值" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-980" y="1944" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-244" value="xp" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-962" y="2012" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-248" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-252" target="onKNXoKgGcAeMGmnEdmf-210" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-909.3200000000002" y="2039.33" as="sourcePoint" />
            <mxPoint x="-883" y="2032" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-249" value="&lt;div&gt;x.parent = xp&lt;/div&gt;xp.left = x&lt;div&gt;root = balanceInsertion(root,x) //&lt;span style=&quot;background-color: rgb(248, 248, 248); color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, &amp;quot;Courier New&amp;quot;, monospace; white-space-collapse: preserve;&quot;&gt;重新平衡红黑树&lt;/span&gt;&lt;/div&gt;&lt;div&gt;break;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-946" y="2058" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-252" value="null" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-922" y="2047" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-256" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.44;entryY=-0.002;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-186" target="onKNXoKgGcAeMGmnEdmf-250" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-260" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-256" vertex="1" connectable="0">
          <mxGeometry x="-0.4596" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-257" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.704;entryY=0.002;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-250" target="onKNXoKgGcAeMGmnEdmf-142" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-259" value="&lt;font color=&quot;#ff3333&quot;&gt;跳出小循环, 进行后续链表元素的树化操作&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="onKNXoKgGcAeMGmnEdmf-257" vertex="1" connectable="0">
          <mxGeometry x="0.007" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-262" value="hd.treeify(tab)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-886" y="990" width="120" height="30.26" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-277" value="e0" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-1150" y="1129" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-278" value="e1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-1110" y="1129" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-279" value="e2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-1070" y="1129" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-280" value="e3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-1030" y="1129" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-281" value="e4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-990" y="1129" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-282" value="e5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-950" y="1129" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-283" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="onKNXoKgGcAeMGmnEdmf-277" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1180" y="1009" as="sourcePoint" />
            <mxPoint x="-1110" y="1139" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-284" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1090" y="1138.8400000000001" as="sourcePoint" />
            <mxPoint x="-1070" y="1138.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-285" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1050" y="1138.8400000000001" as="sourcePoint" />
            <mxPoint x="-1030" y="1138.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-286" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-1010" y="1138.8400000000001" as="sourcePoint" />
            <mxPoint x="-990" y="1138.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-287" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-970" y="1138.8400000000001" as="sourcePoint" />
            <mxPoint x="-950" y="1138.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-288" value="e6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-910" y="1129" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-289" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-930" y="1138.8400000000001" as="sourcePoint" />
            <mxPoint x="-910" y="1138.8400000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-290" value="x的取值" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-1216" y="1125" width="70" height="30" as="geometry" />
        </mxCell>
        <UserObject label="&lt;div&gt;&lt;div&gt;&lt;font color=&quot;#009900&quot;&gt;&lt;span style=&quot;&quot; class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;47&quot;&gt;注：xp和p的关系是父子节点； 这个操作主要是找出符合条件的叶子节点xp&lt;br&gt;根据dir &amp;lt;= 0 的判断来确定p是xp的左节点还是右节点；也就是当前红黑树根节点的左边还是右边&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;&quot; class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;49&quot;&gt;如果插入的是右边就把 p.right赋给 p,插入左边就判断 p.left赋给 p ,并判断&lt;span class=&quot;hljs-attr&quot;&gt;p&lt;/span&gt; == null? &lt;/span&gt;&lt;br&gt;&lt;span style=&quot;&quot; class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;50&quot;&gt;如果p != null,则说明xp不是叶子节点，则继续循环，向下寻找节点插入。&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;&quot; class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;51&quot;&gt;如果 &lt;span style=&quot;&quot; class=&quot;hljs-attr&quot;&gt;p&lt;/span&gt;==null ,就说明xp是一个叶子节点，则把x.parent置为 xp,然后根据 dir大小判断是x置为xp的左子节点还是右子节点。&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" link="&lt;div&gt;&lt;div&gt;&lt;span class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;47&quot;&gt; // 这里判断dir &amp;lt;= 0 时 说明他会被插入到 当前红黑树节点的左边（不一定是左子节点，&lt;/span&gt;&#xa;&lt;span class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;48&quot;&gt;                //只要在这个节点的左半边就行），同理 dir&amp;gt;0 表示它在当前红黑树节点的右边。&lt;/span&gt;&#xa;&lt;span class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;49&quot;&gt;                // 如果插入的是右边就把 p.right赋给 p,插入左边就判断 p.left赋给 p ,并判断&lt;span class=&quot;hljs-attr&quot;&gt;p&lt;/span&gt; == null? &lt;/span&gt;&#xa;&lt;span class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;50&quot;&gt;                // 如果p != null,则说明xp不是叶子节点，则继续循环，向下寻找节点插入。&lt;/span&gt;&#xa;&lt;span class=&quot;code-block-extension-codeLine&quot; data-line-num=&quot;51&quot;&gt;                // 如果 &lt;span class=&quot;hljs-attr&quot;&gt;p&lt;/span&gt;==null ,就说明xp是一个叶子节点，则把x.parent置为 xp,然后根据 dir大小判断是x置为xp的左子节点还是右子节点。&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;作者：樽酒435&lt;br&gt;链接：https://juejin.cn/post/7037031233812955144&lt;br&gt;来源：稀土掘金&lt;br&gt;著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。&lt;/div&gt;&lt;/div&gt;" id="onKNXoKgGcAeMGmnEdmf-292">
          <mxCell style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
            <mxGeometry x="-651" y="2003" width="560" height="180" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-293" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;entryX=0.983;entryY=0.361;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="onKNXoKgGcAeMGmnEdmf-123" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-580" y="1060" as="sourcePoint" />
            <mxPoint x="-640" y="1060.93" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-294" value="入口，从这里开始看" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=32;fontColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="-110" y="110" width="310" height="50" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-295" value="&lt;font style=&quot;font-size: 12px;&quot; color=&quot;#ffffff&quot;&gt;链表重组&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="1161" y="823.5" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="onKNXoKgGcAeMGmnEdmf-296" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1170" y="837.87" as="sourcePoint" />
            <mxPoint x="1090" y="837.87" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="KgLerE87KBL7YLeJpYM6" name="Handle">
    <mxGraphModel dx="81" dy="1253" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-2" target="SVF_KBN14g_UiQ-_b-FJ-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-2" value="&lt;pre style=&quot;font-size: 8px; text-align: left;&quot;&gt;发送消息&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="2760" y="81" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-3" value="&lt;pre style=&quot;font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; font-size: 6px; text-align: left; color: rgb(187, 187, 187);&quot;&gt;&lt;pre style=&quot;font-size: 6px;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;public final boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;sendMessage&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic; font-size: 6px;&quot;&gt;@NonNull &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Message &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;sendMessageDelayed&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;0&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#000000;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="2960" y="76" width="210" height="44" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-4" target="SVF_KBN14g_UiQ-_b-FJ-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-4" value="&lt;pre style=&quot;font-size: 8px; text-align: left;&quot;&gt;发送延时消息&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="2760" y="160" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-13" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;public final boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;sendMessageDelayed&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic; font-size: 6px;&quot;&gt;@NonNull &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Message &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;long &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;delayMillis&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;delayMillis &lt;/span&gt;&amp;lt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;0&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;delayMillis &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;0&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;sendMessageAtTime&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;SystemClock&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;uptimeMillis&lt;/span&gt;() + &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;delayMillis&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;pre style=&quot;font-size: 6px;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;public boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;sendMessageAtTime&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic; font-size: 6px;&quot;&gt;@NonNull &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Message &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;long &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;uptimeMillis&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;MessageQueue &lt;/span&gt;queue = &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;mQueue&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(queue == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Log&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;w&lt;/span&gt;(&lt;span style=&quot;color: rgb(137, 202, 120); font-size: 6px;&quot;&gt;&quot;Looper&quot;&lt;/span&gt;, &quot;sendMessageAtTime() called with no mQueue&quot;, e);&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return false&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;enqueueMessage&lt;/span&gt;(queue, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;uptimeMillis&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;labelBackgroundColor=none;" vertex="1" parent="1">
          <mxGeometry x="2960" y="130" width="310" height="120" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-18" value="Handler" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="2131" y="36" width="309" height="110" as="geometry">
            <mxRectangle x="2131" y="36" width="80" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-19" value="+ mLooper:Looper&lt;div style=&quot;font-size: 8px;&quot;&gt;+ mQueue:MessageQueue&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-18">
          <mxGeometry y="26" width="309" height="34" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-20" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-18">
          <mxGeometry y="60" width="309" height="8" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-21" value="+&amp;nbsp;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;sendMessageAtTime&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial; font-style: italic;&quot;&gt;@NonNull &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;Message &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;msg&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial; font-style: italic;&quot;&gt;long &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;uptimeMillis&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 8px;&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-style: italic; font-size: 8px; background-color: initial;&quot;&gt;boolean&amp;nbsp;&lt;/span&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+&amp;nbsp;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;enqueueMessage&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial; font-style: italic;&quot;&gt;@NonNull &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;MessageQueue &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;queue&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial; font-style: italic;&quot;&gt;@NonNull &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;Message &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;msg&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;,&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial; font-style: italic;&quot;&gt;long &lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;uptimeMillis&lt;/span&gt;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;)&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-size: 8px;&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; font-style: italic; font-size: 8px;&quot;&gt;boolean&amp;nbsp;&lt;/span&gt;&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontColor=#000000;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-18">
          <mxGeometry y="68" width="309" height="42" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-29" target="SVF_KBN14g_UiQ-_b-FJ-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-35" value="调用MessageQueue类的入队方法" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-34">
          <mxGeometry x="0.5383" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-29" value="&lt;pre style=&quot;font-size: 8px; text-align: left;&quot;&gt;消息入队&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="2760" y="220" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-32" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;enqueueMessage&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic; font-size: 6px;&quot;&gt;@NonNull &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;MessageQueue &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;queue&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic; font-size: 6px;&quot;&gt;@NonNull &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Message &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;,&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;long &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;uptimeMillis&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.target = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;this&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.workSourceUid = &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;ThreadLocalWorkSource&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;getUid&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;mAsynchronous&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;setAsynchronous&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;true&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;queue&lt;/span&gt;.enqueueMessage(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;uptimeMillis&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2960" y="249" width="310" height="91" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-41" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-33" target="SVF_KBN14g_UiQ-_b-FJ-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-33" value="&lt;pre style=&quot;font-size: 8px; text-align: left;&quot;&gt;消息入队&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontColor=default;" vertex="1" parent="1">
          <mxGeometry x="2760" y="298.75" width="120" height="20" as="geometry" />
        </mxCell>
        <UserObject label="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;enqueueMessage&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Message &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;long &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;when&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.target == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;IllegalArgumentException&lt;/span&gt;(&lt;span style=&quot;color: rgb(137, 202, 120); font-size: 6px;&quot;&gt;&quot;Message must have a target.&quot;&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;synchronized &lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;this&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.isInUse()) {&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;IllegalStateException&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg &lt;/span&gt;+ &lt;span style=&quot;color: rgb(137, 202, 120); font-size: 6px;&quot;&gt;&quot; This message is already in use.&quot;&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;        }&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;mQuitting&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;IllegalStateException &lt;/span&gt;e = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;IllegalStateException&lt;/span&gt;(&lt;br style=&quot;font-size: 6px;&quot;&gt;                    &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.target + &lt;span style=&quot;color: rgb(137, 202, 120); font-size: 6px;&quot;&gt;&quot; sending message to a Handler on a dead thread&quot;&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Log&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;w&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;TAG&lt;/span&gt;, e.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;getMessage&lt;/span&gt;(), e);&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;recycle&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return false&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;        }&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.markInUse();&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.when = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;when&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Message &lt;/span&gt;p = &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;mMessages&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;boolean &lt;/span&gt;needWake;&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(p == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null &lt;/span&gt;|| &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;when &lt;/span&gt;== &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;0 &lt;/span&gt;|| &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;when &lt;/span&gt;&amp;lt; p.when) {&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// New head, wake up the event queue if blocked.&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.next = p;&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;mMessages &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;            needWake = &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;mBlocked&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;        } &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;else &lt;/span&gt;{&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// Inserted within the middle of the queue.  Usually we don&#39;t have to wake&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;            // up the event queue unless there is a barrier at the head of the queue&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;            // and the message is the earliest asynchronous message in the queue.&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;            &lt;/span&gt;needWake = &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;mBlocked &lt;/span&gt;&amp;amp;&amp;amp; p.target == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;isAsynchronous&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Message &lt;/span&gt;prev;&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;for &lt;/span&gt;(;;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;                prev = p;&lt;br style=&quot;font-size: 6px;&quot;&gt;                p = p.next;&lt;br style=&quot;font-size: 6px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(p == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null &lt;/span&gt;|| &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;when &lt;/span&gt;&amp;lt; p.when) {&lt;br style=&quot;font-size: 6px;&quot;&gt;                    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;break&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;                }&lt;br style=&quot;font-size: 6px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(needWake &amp;amp;&amp;amp; p.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;isAsynchronous&lt;/span&gt;()) {&lt;br style=&quot;font-size: 6px;&quot;&gt;                    needWake = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;false&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;                }&lt;br style=&quot;font-size: 6px;&quot;&gt;            }&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;.next = p; &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// invariant: p == prev.next&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;            &lt;/span&gt;prev.next = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;msg&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;        }&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// We can assume mPtr != 0 because mQuitting is false.&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(needWake) {&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;nativeWake&lt;/span&gt;(&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;mPtr&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;        }&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return true&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;" link="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 20px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;enqueueMessage&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Message &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;long &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;when&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.target == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;IllegalArgumentException&lt;/span&gt;(&lt;span style=&quot;color: rgb(137, 202, 120);&quot;&gt;&quot;Message must have a target.&quot;&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;synchronized &lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;this&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.isInUse()) {&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;IllegalStateException&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg &lt;/span&gt;+ &lt;span style=&quot;color: rgb(137, 202, 120);&quot;&gt;&quot; This message is already in use.&quot;&lt;/span&gt;);&lt;br&gt;        }&lt;br&gt;&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;mQuitting&lt;/span&gt;) {&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;IllegalStateException &lt;/span&gt;e = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;IllegalStateException&lt;/span&gt;(&lt;br&gt;                    &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.target + &lt;span style=&quot;color: rgb(137, 202, 120);&quot;&gt;&quot; sending message to a Handler on a dead thread&quot;&lt;/span&gt;);&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Log&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;w&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;TAG&lt;/span&gt;, e.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;getMessage&lt;/span&gt;(), e);&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;recycle&lt;/span&gt;();&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return false&lt;/span&gt;;&lt;br&gt;        }&lt;br&gt;&lt;br&gt;        &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.markInUse();&lt;br&gt;        &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.when = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;when&lt;/span&gt;;&lt;br&gt;        &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Message &lt;/span&gt;p = &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;mMessages&lt;/span&gt;;&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;boolean &lt;/span&gt;needWake;&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(p == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;|| &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;when &lt;/span&gt;== &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;0 &lt;/span&gt;|| &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;when &lt;/span&gt;&amp;lt; p.when) {&lt;br&gt;            &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// New head, wake up the event queue if blocked.&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;            &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.next = p;&lt;br&gt;            &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;mMessages &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;;&lt;br&gt;            needWake = &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;mBlocked&lt;/span&gt;;&lt;br&gt;        } &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// Inserted within the middle of the queue.  Usually we don&#39;t have to wake&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;            // up the event queue unless there is a barrier at the head of the queue&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;            // and the message is the earliest asynchronous message in the queue.&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;            &lt;/span&gt;needWake = &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;mBlocked &lt;/span&gt;&amp;amp;&amp;amp; p.target == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;isAsynchronous&lt;/span&gt;();&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Message &lt;/span&gt;prev;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;for &lt;/span&gt;(;;) {&lt;br&gt;                prev = p;&lt;br&gt;                p = p.next;&lt;br&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(p == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null &lt;/span&gt;|| &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;when &lt;/span&gt;&amp;lt; p.when) {&lt;br&gt;                    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;break&lt;/span&gt;;&lt;br&gt;                }&lt;br&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(needWake &amp;amp;&amp;amp; p.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;isAsynchronous&lt;/span&gt;()) {&lt;br&gt;                    needWake = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;false&lt;/span&gt;;&lt;br&gt;                }&lt;br&gt;            }&lt;br&gt;            &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;.next = p; &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// invariant: p == prev.next&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;            &lt;/span&gt;prev.next = &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;msg&lt;/span&gt;;&lt;br&gt;        }&lt;br&gt;&lt;br&gt;        &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;// We can assume mPtr != 0 because mQuitting is false.&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(needWake) {&lt;br&gt;            &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;nativeWake&lt;/span&gt;(&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;mPtr&lt;/span&gt;);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return true&lt;/span&gt;;&lt;br&gt;}&lt;/pre&gt;" id="SVF_KBN14g_UiQ-_b-FJ-39">
          <mxCell style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
            <mxGeometry x="2960" y="340" width="320" height="410" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-43" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-40" target="SVF_KBN14g_UiQ-_b-FJ-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-44" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-43">
          <mxGeometry x="-0.0769" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-40" target="SVF_KBN14g_UiQ-_b-FJ-45">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-50" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-46">
          <mxGeometry x="-0.1917" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-40" value="判断msg是否有对应的handler" style="rhombus;whiteSpace=wrap;html=1;rounded=0;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="2780" y="340" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-42" value="扔异常" style="whiteSpace=wrap;html=1;fontSize=6;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2670" y="370" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-45" target="SVF_KBN14g_UiQ-_b-FJ-47">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-49" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-48">
          <mxGeometry x="-0.2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-52" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-45" target="SVF_KBN14g_UiQ-_b-FJ-51">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-56" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-52">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-45" value="判断msg是否已经被使用了" style="rhombus;whiteSpace=wrap;html=1;rounded=0;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="2780" y="455" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-47" value="扔异常" style="whiteSpace=wrap;html=1;fontSize=6;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2680" y="485" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-54" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-51" target="SVF_KBN14g_UiQ-_b-FJ-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-55" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-54">
          <mxGeometry x="-0.2222" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-69" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-51" target="SVF_KBN14g_UiQ-_b-FJ-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-70" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-69">
          <mxGeometry x="-0.4271" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-51" value="判断当前handle所在的线程是否正在退出" style="rhombus;whiteSpace=wrap;html=1;rounded=0;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="2780" y="566.75" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-53" value="销毁消息，返回false" style="whiteSpace=wrap;html=1;fontSize=6;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2600" y="591.75" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-57" value="上锁，同步代码块" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2760" y="455" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-58" value="MessageQueue" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="2130" y="180" width="310" height="84" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-59" value="+ mMessages: Message&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-58">
          <mxGeometry y="26" width="310" height="24" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-60" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-58">
          <mxGeometry y="50" width="310" height="8" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-61" value="+ enqueueMessage(type): boolean" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-58">
          <mxGeometry y="58" width="310" height="26" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-62" value="Message" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="2131" y="337" width="309" height="144" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-63" value="+ when: long&lt;div style=&quot;font-size: 8px;&quot;&gt;+ target:Handle&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ data:Bundle&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ next: Message&amp;nbsp; &amp;nbsp; &amp;nbsp;//由此构成消息的单项链表&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ sPool: Message&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ sPoolSize: int&amp;nbsp;&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ MAX_POOL_SIZE: int // 50&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-62">
          <mxGeometry y="26" width="309" height="84" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-64" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-62">
          <mxGeometry y="110" width="309" height="8" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-65" value="+ obtain(): Message" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-62">
          <mxGeometry y="118" width="309" height="26" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-72" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-68" target="SVF_KBN14g_UiQ-_b-FJ-71">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-73" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-72">
          <mxGeometry x="-0.0111" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-75" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SVF_KBN14g_UiQ-_b-FJ-68" target="SVF_KBN14g_UiQ-_b-FJ-74">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-76" value="否" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="SVF_KBN14g_UiQ-_b-FJ-75">
          <mxGeometry x="-0.1278" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-68" value="判断msg链表是否为空&lt;div&gt;或者插入消息的when==0&lt;br&gt;或者when&amp;lt;p.when&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=0;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="2780" y="726.75" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-71" value="将消息插在队列头部" style="whiteSpace=wrap;html=1;fontSize=6;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2600" y="756.75" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-74" value="将消息插入消息链表对应的位置" style="whiteSpace=wrap;html=1;fontSize=6;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2760" y="870" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-77" value="Looper" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="2130" y="550" width="310" height="160" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-78" value="+ sThreadLocal: ThreadLocal&lt;div style=&quot;font-size: 8px;&quot;&gt;+ sMainLooper: Looper&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ mQueue: MessageQueue&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ mThread: Thread&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-77">
          <mxGeometry y="26" width="310" height="54" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-79" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-77">
          <mxGeometry y="80" width="310" height="8" as="geometry" />
        </mxCell>
        <mxCell id="SVF_KBN14g_UiQ-_b-FJ-80" value="+ prepareMainLooper():void //为主线程创建Looper对象&lt;div style=&quot;font-size: 8px;&quot;&gt;+ getMainLooper(): Looper //获取主线程的Looper对象&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 8px;&quot;&gt;+&amp;nbsp;&lt;/span&gt;prepare(quitAllow): void // 每个线程只能调用一次&lt;div style=&quot;font-size: 8px;&quot;&gt;+ myLooper(): Looper //获取当前线程的Looper对象&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ loop(): void //死循环消息列表&lt;br style=&quot;font-size: 8px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;+ loopOnce(): void&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="SVF_KBN14g_UiQ-_b-FJ-77">
          <mxGeometry y="88" width="310" height="72" as="geometry" />
        </mxCell>
        <mxCell id="htp0pqVOB_GgmM7RNFBv-2" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;static final &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ThreadLocal&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Looper&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;sThreadLocal &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ThreadLocal&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Looper&lt;/span&gt;&amp;gt;();&lt;/pre&gt;&lt;/pre&gt;&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private static void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;prepare&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;quitAllowed&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;sThreadLocal&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;get&lt;/span&gt;() != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;RuntimeException&lt;/span&gt;(&lt;span style=&quot;color: rgb(137, 202, 120); font-size: 6px;&quot;&gt;&quot;Only one Looper may be created per thread&quot;&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;sThreadLocal&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;set&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Looper&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;quitAllowed&lt;/span&gt;));&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1790" y="585" width="330" height="70" as="geometry" />
        </mxCell>
        <mxCell id="htp0pqVOB_GgmM7RNFBv-4" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;public static &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic; font-size: 6px;&quot;&gt;@Nullable &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Looper &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;myLooper&lt;/span&gt;() {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;sThreadLocal&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;get&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fillColor=#000000;fontSize=6;" vertex="1" parent="1">
          <mxGeometry x="1790" y="655" width="200" height="50" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="B5dIO6AN51XFmtcyMUDD" name="ThreadLocal">
    <mxGraphModel dx="-594" dy="766" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="4JSQju-QF8H9R8TIQm2g-1" value="ThreadLocal" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1720" y="40" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-2" value="&lt;div&gt;-&amp;nbsp;&lt;span style=&quot;font-size: 8px; background-color: initial;&quot;&gt;HASH_INCREMENT: int = 0x61c88647&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="4JSQju-QF8H9R8TIQm2g-1">
          <mxGeometry y="26" width="200" height="26" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-3" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" vertex="1" parent="4JSQju-QF8H9R8TIQm2g-1">
          <mxGeometry y="52" width="200" height="8" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-4" value="+ set(T): void&lt;div&gt;+ get(): T&lt;br&gt;&lt;/div&gt;&lt;div&gt;getMap(Thread): ThreadLocalMap&lt;/div&gt;&lt;div&gt;createMap(Thread, T): void&lt;br&gt;&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="4JSQju-QF8H9R8TIQm2g-1">
          <mxGeometry y="60" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-5" value="ThreadLocalMap" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1720" y="190" width="190" height="130" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-6" value="- INITIAL_CAPACITY: int = 16&lt;div&gt;- table: Entry[]&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="4JSQju-QF8H9R8TIQm2g-5">
          <mxGeometry y="26" width="190" height="44" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-7" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;" vertex="1" parent="4JSQju-QF8H9R8TIQm2g-5">
          <mxGeometry y="70" width="190" height="8" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-8" value="- set(T): void&lt;div&gt;- getEntry(ThreadLocal): Entry&lt;/div&gt;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;" vertex="1" parent="4JSQju-QF8H9R8TIQm2g-5">
          <mxGeometry y="78" width="190" height="52" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-9" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;set&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;T &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;value&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Thread &lt;/span&gt;t = &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Thread&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;currentThread&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;ThreadLocalMap &lt;/span&gt;map = &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;getMap&lt;/span&gt;(t);&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(map != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 6px;&quot;&gt;        map.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;set&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;value&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;else&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;createMap&lt;/span&gt;(t, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;value&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;br&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;public &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;T &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;get&lt;/span&gt;() {&lt;br&gt;    &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Thread &lt;/span&gt;t = &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Thread&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;currentThread&lt;/span&gt;();&lt;br&gt;    &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ThreadLocalMap &lt;/span&gt;map = &lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;getMap&lt;/span&gt;(t);&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(map != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;        &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ThreadLocalMap&lt;/span&gt;.&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Entry &lt;/span&gt;e = map.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;getEntry&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;this&lt;/span&gt;);&lt;br&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;if &lt;/span&gt;(e != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic;&quot;&gt;@SuppressWarnings&lt;/span&gt;(&lt;span style=&quot;color: rgb(137, 202, 120);&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;)&lt;br&gt;            &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;T &lt;/span&gt;result = (&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;T&lt;/span&gt;)e.&lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;value&lt;/span&gt;;&lt;br&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;result;&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;setInitialValue&lt;/span&gt;();&lt;br&gt;}&lt;/pre&gt;&lt;pre&gt;&lt;br&gt;&lt;pre&gt;&lt;br&gt;&lt;/pre&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1900" y="451" width="212" height="180" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-11" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;set&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;ThreadLocal&lt;/span&gt;&amp;lt;?&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Object &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;value&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// We don&#39;t use a fast path as with get() because it is at&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;    // least as common to use set() to create new entries as&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;    // it is to replace existing ones, in which case, a fast&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;    // path would fail more often than not.&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry&lt;/span&gt;[] tab = &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;table&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;len = tab.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;length&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;i = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;.threadLocalHashCode &amp;amp; (len-&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry &lt;/span&gt;e = tab[i];&lt;br style=&quot;font-size: 6px;&quot;&gt;         e != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;         e = tab[i = &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;nextIndex&lt;/span&gt;(i, len)]) {&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// Android-changed: Use refersTo() (twice).&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;        // ThreadLocal&amp;lt;?&amp;gt; k = e.get();&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;        // if (k == key) { ... } if (k == null) { ... }&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(e.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;refersTo&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;)) {&lt;br style=&quot;font-size: 6px;&quot;&gt;            e.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;value &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;value&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;        }&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(e.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;refersTo&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;)) {&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;replaceStaleEntry&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;value&lt;/span&gt;, i);&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;        }&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;    tab[i] = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;value&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;sz = ++&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;size&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(!&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;cleanSomeSlots&lt;/span&gt;(i, sz) &amp;amp;&amp;amp; sz &amp;gt;= &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;threshold&lt;/span&gt;)&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;rehash&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1862" y="631" width="250" height="270" as="geometry" />
        </mxCell>
        <mxCell id="4JSQju-QF8H9R8TIQm2g-13" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;getEntry&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;ThreadLocal&lt;/span&gt;&amp;lt;?&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;i = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;.threadLocalHashCode &amp;amp; (&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;table&lt;/span&gt;.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;length &lt;/span&gt;- &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry &lt;/span&gt;e = &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;table&lt;/span&gt;[i];&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// Android-changed: Use refersTo().&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(e != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null &lt;/span&gt;&amp;amp;&amp;amp; e.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;refersTo&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;))&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return &lt;/span&gt;e;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;else&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;        return &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;getEntryAfterMiss&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;key&lt;/span&gt;, i, e);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1862" y="900" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Usvd829vFf0LGTeXWWfx-1" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ThreadLocalMap &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;getMap&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Thread &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;t&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;t&lt;/span&gt;.threadLocals;&lt;br&gt;}&lt;/pre&gt;&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;createMap&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Thread &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;t&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;T &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;firstValue&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;t&lt;/span&gt;.threadLocals = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;new &lt;br/&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ThreadLocalMap&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;this&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;firstValue&lt;/span&gt;);&lt;br&gt;}&lt;/pre&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;labelBackgroundColor=none;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1722" y="467" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Usvd829vFf0LGTeXWWfx-3" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;ThreadLocalMap&lt;/span&gt;(&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;ThreadLocal&lt;/span&gt;&amp;lt;?&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;firstKey&lt;/span&gt;, &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Object &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;firstValue&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;table &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry&lt;/span&gt;[&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;INITIAL_CAPACITY&lt;/span&gt;];&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;i = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;firstKey&lt;/span&gt;.threadLocalHashCode &amp;amp; (&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;INITIAL_CAPACITY &lt;/span&gt;- &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;table&lt;/span&gt;[i] = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;firstKey&lt;/span&gt;, &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;firstValue&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;size &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;setThreshold&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;INITIAL_CAPACITY&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;br/&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;private void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;setThreshold&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;len&lt;/span&gt;) {&lt;br&gt;    &lt;span style=&quot;color: rgb(239, 89, 111);&quot;&gt;threshold &lt;/span&gt;= &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;len &lt;/span&gt;* &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;2 &lt;/span&gt;/ &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;3&lt;/span&gt;;&lt;br&gt;}&lt;/pre&gt;&lt;br/&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2112" y="631" width="290" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Usvd829vFf0LGTeXWWfx-7" value="&lt;div style=&quot;font-size: 8px;&quot;&gt;ThreadLocal对象进行set(T)的时候，会获取当前线程中的ThreadLocalMap对象；然后将数据存放在ThreadLocalMap中。&lt;/div&gt;每个线程都有一个ThreadLocalMap，里面存放的数据是Entry数组，每个Entry是以ThreadLocal为key，T为value进行存储；" style="whiteSpace=wrap;html=1;align=left;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="1962" y="232" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-2" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private static int &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;nextIndex&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;i&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;len&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return &lt;/span&gt;((&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;i &lt;/span&gt;+ &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1 &lt;/span&gt;&amp;lt; &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;len&lt;/span&gt;) ? &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;i &lt;/span&gt;+ &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1 &lt;/span&gt;: &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;0&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private static int &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;prevIndex&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;i&lt;/span&gt;, &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;len&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;return &lt;/span&gt;((&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;i &lt;/span&gt;- &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1 &lt;/span&gt;&amp;gt;= &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;0&lt;/span&gt;) ? &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;i &lt;/span&gt;- &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1 &lt;/span&gt;: &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;len &lt;/span&gt;- &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1693" y="726" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-4" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;rehash&lt;/span&gt;() {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;expungeStaleEntries&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// Use lower threshold for doubling to avoid hysteresis&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;size &lt;/span&gt;&amp;gt;= &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;threshold &lt;/span&gt;- &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;threshold &lt;/span&gt;/ &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;4&lt;/span&gt;)&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;resize&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;/**&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt; * Double the capacity of the table.&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt; */&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;resize&lt;/span&gt;() {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry&lt;/span&gt;[] oldTab = &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;table&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;oldLen = oldTab.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;length&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;newLen = oldLen * &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;2&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry&lt;/span&gt;[] newTab = &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry&lt;/span&gt;[newLen];&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;count = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;0&lt;/span&gt;;&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;for &lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;j = &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;0&lt;/span&gt;; j &amp;lt; oldLen; ++j) {&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Entry &lt;/span&gt;e = oldTab[j];&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(e != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;ThreadLocal&lt;/span&gt;&amp;lt;?&amp;gt; k = e.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;get&lt;/span&gt;();&lt;br style=&quot;font-size: 6px;&quot;&gt;            &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(k == &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;                e.&lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;value &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;; &lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;// Help the GC&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(92, 99, 112); font-style: italic; font-size: 6px;&quot;&gt;            &lt;/span&gt;} &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;else &lt;/span&gt;{&lt;br style=&quot;font-size: 6px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;int &lt;/span&gt;h = k.threadLocalHashCode &amp;amp; (newLen - &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;1&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;                &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;while &lt;/span&gt;(newTab[h] != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;)&lt;br style=&quot;font-size: 6px;&quot;&gt;                    h = &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;nextIndex&lt;/span&gt;(h, newLen);&lt;br style=&quot;font-size: 6px;&quot;&gt;                newTab[h] = e;&lt;br style=&quot;font-size: 6px;&quot;&gt;                count++;&lt;br style=&quot;font-size: 6px;&quot;&gt;            }&lt;br style=&quot;font-size: 6px;&quot;&gt;        }&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;setThreshold&lt;/span&gt;(newLen);&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;size &lt;/span&gt;= count;&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(239, 89, 111); font-size: 6px;&quot;&gt;table &lt;/span&gt;= newTab;&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2111" y="859" width="260" height="310" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-7" value="Thread" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="2020" y="40" width="180" height="52" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-8" value="+ threadLocals: ThreadLocal.ThreadLocalMap" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-7">
          <mxGeometry y="26" width="180" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-11" value="" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=0;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="2240" y="70" width="152" height="208" as="geometry">
            <mxRectangle x="1170" y="410" width="50" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-16" value="entry: Entry --&amp;gt; (ThreadLocal, Tvalue)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-11">
          <mxGeometry width="152" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-18" value="entry1: Entry&amp;nbsp;--&amp;gt; (ThreadLocal, Tvalue)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-11">
          <mxGeometry y="26" width="152" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-19" value="entry2: Entry&amp;nbsp;--&amp;gt; (ThreadLocal, Tvalue)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-11">
          <mxGeometry y="52" width="152" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-21" value="entry3: Entry&amp;nbsp;--&amp;gt; (ThreadLocal, Tvalue)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-11">
          <mxGeometry y="78" width="152" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-23" value="entry4: Entry&amp;nbsp;--&amp;gt; (ThreadLocal, Tvalue)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-11">
          <mxGeometry y="104" width="152" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-24" value="entry5: Entry&amp;nbsp;--&amp;gt; (ThreadLocal, Tvalue)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-11">
          <mxGeometry y="130" width="152" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-25" value="entry6: Entry&amp;nbsp;--&amp;gt; (ThreadLocal, Tvalue)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-11">
          <mxGeometry y="156" width="152" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-26" value="......" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;whiteSpace=wrap;html=1;fontSize=8;" vertex="1" parent="YRkNxRZ61KOj2W9NJHFv-11">
          <mxGeometry y="182" width="152" height="26" as="geometry" />
        </mxCell>
        <mxCell id="YRkNxRZ61KOj2W9NJHFv-28" value="" style="endArrow=open;endFill=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=-0.019;entryY=0.33;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=8;" edge="1" parent="1" source="YRkNxRZ61KOj2W9NJHFv-8" target="YRkNxRZ61KOj2W9NJHFv-16">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="2232" y="270" as="sourcePoint" />
            <mxPoint x="2392" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fzmKr-huMYEFjz7aQjL3-1" value="&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;static final &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ThreadLocal&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Looper&lt;/span&gt;&amp;gt; &lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;sThreadLocal &lt;/span&gt;= &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;ThreadLocal&lt;/span&gt;&amp;lt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Looper&lt;/span&gt;&amp;gt;();&lt;/pre&gt;&lt;/pre&gt;&lt;pre style=&quot;color: rgb(187, 187, 187); font-size: 6px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;private static void &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;prepare&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;boolean &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;quitAllowed&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;if &lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;sThreadLocal&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;get&lt;/span&gt;() != &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;null&lt;/span&gt;) {&lt;br style=&quot;font-size: 6px;&quot;&gt;        &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;throw new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;RuntimeException&lt;/span&gt;(&lt;span style=&quot;color: rgb(137, 202, 120); font-size: 6px;&quot;&gt;&quot;Only one Looper may be created per thread&quot;&lt;/span&gt;);&lt;br style=&quot;font-size: 6px;&quot;&gt;    }&lt;br style=&quot;font-size: 6px;&quot;&gt;    &lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;sThreadLocal&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239); font-size: 6px;&quot;&gt;set&lt;/span&gt;(&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic; font-size: 6px;&quot;&gt;new &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-size: 6px;&quot;&gt;Looper&lt;/span&gt;(&lt;span style=&quot;color: rgb(209, 154, 102); font-size: 6px;&quot;&gt;quitAllowed&lt;/span&gt;));&lt;br style=&quot;font-size: 6px;&quot;&gt;}&lt;br/&gt;&lt;pre&gt;&lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;public static &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123); font-style: italic;&quot;&gt;@Nullable &lt;/span&gt;&lt;span style=&quot;color: rgb(229, 192, 123);&quot;&gt;Looper &lt;/span&gt;&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;myLooper&lt;/span&gt;() {&lt;br&gt;    &lt;span style=&quot;color: rgb(213, 95, 222); font-style: italic;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color: rgb(209, 154, 102);&quot;&gt;sThreadLocal&lt;/span&gt;.&lt;span style=&quot;color: rgb(97, 175, 239);&quot;&gt;get&lt;/span&gt;();&lt;br&gt;}&lt;/pre&gt;&lt;br/&gt;&lt;/pre&gt;" style="text;whiteSpace=wrap;html=1;fontSize=6;fillColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2112" y="450" width="330" height="100" as="geometry" />
        </mxCell>
        <mxCell id="cZl-_tYypcyyZDHa4Ti2-1" value="ThreadLocal 类的使用方法，以Android中Looper举例" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="2112" y="422" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uK6GI_ooJPnrXkrZsftc-3" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;strokeWidth=0.5;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1914" y="481" as="sourcePoint" />
            <mxPoint x="1844" y="481" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uK6GI_ooJPnrXkrZsftc-5" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;strokeWidth=0.5;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1929" y="510.71" as="sourcePoint" />
            <mxPoint x="1869" y="510.71" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uK6GI_ooJPnrXkrZsftc-6" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;strokeWidth=0.5;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2125" y="506" as="sourcePoint" />
            <mxPoint x="2037" y="466" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="uK6GI_ooJPnrXkrZsftc-7" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;strokeWidth=0.5;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2128" y="536" as="sourcePoint" />
            <mxPoint x="1958" y="528" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2038" y="528" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="uK6GI_ooJPnrXkrZsftc-10" value="" style="curved=1;endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;strokeWidth=0.5;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1951.62" y="501" as="sourcePoint" />
            <mxPoint x="1921.62" y="641" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2090.37" y="491" />
              <mxPoint x="2090.37" y="611" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="uK6GI_ooJPnrXkrZsftc-11" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#FFFFFF;strokeWidth=0.5;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1922" y="877" as="sourcePoint" />
            <mxPoint x="2112" y="877" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
